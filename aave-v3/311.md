借阅练习
在本练习中，您将学习如何从 Aave V3 借入代币。

本练习的起始代码位于foundry/src/exercises/Borrow.sol

解决方案提供于foundry/src/solutions/Borrow.sol

任务 1 - 估算可借用代币的最大数量
函数 approxMaxBorrow (地址token )公共 视图 返回( uint256 ) {
    // 任务 1.1 - 从预言机获取资产价格。
    // 返回价格，精确到 8 位小数（1e8 = 1 美元）
​
    // 任务 1.2 - 获取 token 的小数部分
​
    // 任务 1.3 - 获取可从 Aave V3 借入的美元金额
​
    // 任务 1.4 - 计算可借代币数量
}
实现该approxMaxBorrow(函数。该函数将估算您可以借入的最大代币数量。

token是借用的代币

提示

致电oracle.getAssetPrice获取美元价格token

致电pool.getUserAccountData获取可从 Aave 借入的最高美元金额

可借入的大约金额token是可借入的最大美元价值除以token

任务 2 - 获取此合约的健康因子
函数 getHealthFactor（)公共 视图 返回( uint256 ) {}
获取此合同的健康因素

提示 - 呼叫pool.getUserAccountData

任务 3 - 从 Aave V3 借入代币
函数 借入（地址代币，uint256金额）公共 {}
借鉴tokenAave V3

token是借用的代币

amounttoken借款金额

提示 - 呼叫pool.borrow

任务 4 - 获取此合同的可变债务余额
函数 getVariableDebt（地址令牌）公共 视图 返回（uint256） {
    // 任务 4.1 - 从池合约中获取可变债务代币地址
​
    // 任务 4.2 - 获取此合约的可变债务代币的余额。
    // 可变债务代币的余额是该代币的数量
    // 合约必须偿还给 Aave V3。
}
获取该合同的可变债务余额。

提示

调用pool.getReserveData获取可变债务代币地址

查询此合约的可变债务代币余额，获取此合约当前欠 Aave 的债务

测试
伪造测试--fork-url $FORK_URL --fork-block-number $FORK_BLOCK_NUM --match-path test/Borrow.test.sol -vvv
